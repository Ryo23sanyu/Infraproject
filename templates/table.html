<!-- table.html -->
{% extends "base.html" %}
{% load static %}

{% block title %}損傷一覧{% endblock title %}
{% block h1 %}損傷一覧{% endblock %}

{% block content %}
    <table class="my-table" border="1">
        <thead>
            <tr>
                <th>損傷箇所</th>
                <th>損傷種類</th>
                <th>損傷番号</th>
                <th>損傷写真</th>
                <th>写真メモ</th>
            </tr>
        </thead>
        <tbody id="sortable">
            {% for bridge in damage_table %}
            <form>
                <tr>
                    <td>{{ bridge.first }}</td>
                    <td>
                        {% if bridge.second is not None %}
                            {% if bridge.second %}
                                {% for item in bridge.second %}
                                    {{ item }}</br>
                                    <select name="input1_{{ forloop.counter }}" onChange="updatePlaceholder(this)" style="width: 100px;">
                                        </br><option value=""></option>
                                        <option value="width">幅</option>
                                        <option value="area">面積</option>
                                        <option value="bolt">本数</option>
                                        <option value="level">段差量</option>
                                        <!-- 必要に応じて他のオプションを追加 -->
                                    </select>
                                    <input type="text" name="input3_{{ forloop.counter }}" placeholder="数量" style="width: 100px;" /> <!-- 数量 -->
                                    <input type="text" name="input2_{{ forloop.counter }}" placeholder="単位" style="width: 50px;" id="input_{{ forloop.counter }}" /> <!-- 単位 -->                               
                                    <input type="text" name="input4_{{ forloop.counter }}" placeholder="分類" style="width: 75px;" /> <!-- 分類 -->
                                    <input type="text" name="input5_{{ forloop.counter }}" placeholder="パターン" style="width: 75px;" /> <!-- パターン -->
                                    </br></br>
                                {% endfor %}
                            {% endif %}
                        {% endif %}
                    </td>
                    <td class="center-align">
                    {% if bridge.last is not None %}
                        {% if bridge.last|length == 1 %}<!-- 要素が1つの場合 -->
                            <img src="{% static bridge.last.0 %}" width="200" height="150">
                            <!--<td>{{ bridge.last}}</td>-->
                        {% elif bridge.last|length == 2 %}
                            <img src="{% static bridge.last.0 %}" width="200" height="150"></br>
                            <img src="{% static bridge.last.1 %}" width="200" height="150">
                        {% elif bridge.last|length == 3 %}
                            <img src="{% static bridge.last.0 %}" width="200" height="150"></br>
                            <img src="{% static bridge.last.1 %}" width="200" height="150"></br>
                            <img src="{% static bridge.last.2 %}" width="200" height="150">
                        {% else %}<!-- それ以外の場合の処理 -->
                            <img src="{% static bridge.picture %}" width="200" height="150">
                        {% endif %}
                    {% endif %}
                    </td>
                    <td class="center-align"><img src="{% static bridge.picture %}" width="200" height="150"></td>
                    <td class="center-align">
                        <textarea name="notes" rows="6" placeholder="自由記述"></textarea>
                    </td>
                </tr>
            </form>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}